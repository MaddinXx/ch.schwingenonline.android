(function(){var i,e,g,d,f,b,h,j,c,a;j=this;e=function(l,m,k){var n;console.log("SQLitePlugin");if(!(l&&l.name)){throw new Error("Cannot create a SQLitePlugin instance without a db name")}n=l.name;this.openargs=l;this.dbname=n;this.openSuccess=m;this.openError=k;this.openSuccess||(this.openSuccess=function(){return console.log("DB opened: "+n)});this.openError||(this.openError=function(o){return console.log(o.message)});this.open(this.openSuccess,this.openError)};e.prototype.openDBs={};e.prototype.transaction=function(m,k,n){var l;l=new d(this.dbname);m(l);l.complete(n,k)};e.prototype.open=function(l,k){console.log("SQLitePlugin.prototype.open");if(!(this.dbname in this.openDBs)){this.openDBs[this.dbname]=true;cordova.exec(l,k,"SQLitePlugin","open",[this.openargs])}};e.prototype.close=function(l,k){console.log("SQLitePlugin.prototype.close");if(this.dbname in this.openDBs){delete this.openDBs[this.dbname];cordova.exec(null,null,"SQLitePlugin","close",[this.dbname])}};h=function(){return 1};e.prototype.executePragmaStatement=function(l,m,k){console.log("SQLitePlugin::executePragmaStatement");h=m;cordova.exec((function(){return 1}),k,"SQLitePlugin","executePragmaStatement",[this.dbname,l])};g={p1:function(m,k){var l;console.log("PRAGMA CB");l=h;h=function(){return 1};l(k)}};b=function(){var l,k;l=new Date().getTime();k=new Date().getTime();while(l===k){k=new Date().getTime()}return k+"000"};a=[];c={};d=function(k){this.dbname=k;this.executes=[];this.trans_id=b();this.__completed=false;this.__submitted=false;this.optimization_no_nested_callbacks=false;console.log("SQLitePluginTransaction - this.trans_id:"+this.trans_id);a[this.trans_id]=[];c[this.trans_id]=new Object()};f={};f.queryCompleteCallback=function(o,n,l){var m,k;console.log("SQLitePluginTransaction.queryCompleteCallback");m=null;for(k in a[o]){if(a[o][k]["query_id"]===n){m=a[o][k];if(a[o].length===1){a[o]=[]}else{a[o].splice(k,1)}break}}if(m&&m.callback){return m.callback(l)}};f.queryErrorCallback=function(o,n,l){var m,k;m=null;for(k in a[o]){if(a[o][k]["query_id"]===n){m=a[o][k];if(a[o].length===1){a[o]=[]}else{a[o].splice(k,1)}break}}if(m&&m.err_callback){return m.err_callback(l)}};f.txCompleteCallback=function(k){if(typeof k!=="undefined"){if(k&&c[k]&&c[k]["success"]){return c[k]["success"]()}}else{return console.log("SQLitePluginTransaction.txCompleteCallback---transId = NULL")}};f.txErrorCallback=function(l,k){if(typeof l!=="undefined"){console.log("SQLitePluginTransaction.txErrorCallback---transId:"+l);if(l&&c[l]["error"]){c[l]["error"](k)}delete a[l];return delete c[l]}else{return console.log("SQLitePluginTransaction.txErrorCallback---transId = NULL")}};d.prototype.add_to_transaction=function(m,l,n,p,o){var k;k=new Object();k.trans_id=m;if(p||!this.optimization_no_nested_callbacks){k.query_id=b()}else{if(this.optimization_no_nested_callbacks){k.query_id=""}}k.query=l;if(n){k.params=n}else{k.params=[]}k.callback=p;k.err_callback=o;if(!a[m]){a[m]=[]}a[m].push(k)};d.prototype.executeSql=function(q,k,p,n){var m,o,l;console.log("SQLitePluginTransaction.prototype.executeSql");m=void 0;o=void 0;l=void 0;l=this;o=null;if(p){console.log("success not null:"+q);o=function(t){var s,r;console.log("executeSql callback:"+JSON.stringify(t));s=void 0;r=void 0;r=t;s={rows:{item:function(u){return r[u]},length:r.length},rowsAffected:r.rowsAffected,insertId:r.insertId||null};return p(l,s)}}else{console.log("success NULL:"+q)}m=null;if(n){m=function(r){return n(l,r)}}console.log("executeSql - add_to_transaction"+q);this.add_to_transaction(this.trans_id,q,k,o,m)};d.prototype.complete=function(o,m){var l,n,k;console.log("SQLitePluginTransaction.prototype.complete");if(this.__completed){throw new Error("Transaction already run")}if(this.__submitted){throw new Error("Transaction already submitted")}this.__submitted=true;k=this;n=function(){if(a[k.trans_id].length>0&&!k.optimization_no_nested_callbacks){k.__submitted=false;return k.complete(o,m)}else{this.__completed=true;if(o){return o(k)}}};l=function(p){return null};if(m){l=function(p){return m(k,p)}}c[this.trans_id]["success"]=n;c[this.trans_id]["error"]=l;cordova.exec(null,null,"SQLitePlugin","executeSqlBatch",[this.dbname,a[this.trans_id]])};i={opendb:function(){var l,n,m,k;if(arguments.length<1){return null}n=arguments[0];k=null;m=null;l=null;if(n.constructor===String){k={name:n};if(arguments.length>=5){m=arguments[4];if(arguments.length>5){l=arguments[5]}}}else{k=n;if(arguments.length>=2){m=arguments[1];if(arguments.length>2){l=arguments[2]}}}return new e(k,m,l)}};j.SQLitePluginCallback=g;j.SQLitePluginTransactionCB=f;return j.sqlitePlugin={openDatabase:i.opendb}})();